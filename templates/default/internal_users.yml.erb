---
# This is the internal user database
# The hash value is a bcrypt hash and can be generated with plugin/tools/hash.sh

_meta:
  type: "internalusers"
  config_version: 2


<%=node['elastic']['opensearch_security']['admin']['username']%>:
  hash: "<%=`JAVA_HOME=#{node['java']['java_home']} #{node['elastic']['opensearch_security']['tools']['hash']} -p #{node['elastic']['opensearch_security']['admin']['password']}`.strip %>"
  reserved: true
  backend_roles:
  - "admin"
  description: "Admin user"

<%=node['elastic']['opensearch_security']['kibana']['username']%>:
  hash: "<%=`JAVA_HOME=#{node['java']['java_home']} #{node['elastic']['opensearch_security']['tools']['hash']} -p #{node['elastic']['opensearch_security']['kibana']['password']}`.strip %>"
  reserved: true
  description: "Kibanaserver user"

<%=node['elastic']['opensearch_security']['logstash']['username']%>:
  hash: "<%=`JAVA_HOME=#{node['java']['java_home']} #{node['elastic']['opensearch_security']['tools']['hash']} -p #{node['elastic']['opensearch_security']['logstash']['password']}`.strip %>"
  reserved: true
  backend_roles:
  - "logstash"
  description: "Logstash user"

<%=node['elastic']['opensearch_security']['elastic_exporter']['username']%>:
  hash: "<%=`JAVA_HOME=#{node['java']['java_home']} #{node['elastic']['opensearch_security']['tools']['hash']} -p #{node['elastic']['opensearch_security']['elastic_exporter']['password']}`.strip %>"
  reserved: true
  description: "Elastic exporter user"

<%=node['elastic']['opensearch_security']['epipe']['username']%>:
  hash: "<%=`JAVA_HOME=#{node['java']['java_home']} #{node['elastic']['opensearch_security']['tools']['hash']} -p #{node['elastic']['opensearch_security']['epipe']['password']}`.strip %>"
  reserved: true
  description: "ePipe user"

<%=node['elastic']['opensearch_security']['service_log_viewer']['username']%>:
  hash: "<%=`JAVA_HOME=#{node['java']['java_home']} #{node['elastic']['opensearch_security']['tools']['hash']} -p #{node['elastic']['opensearch_security']['service_log_viewer']['password']}`.strip %>"
  reserved: true
  description: "User allow to only see the service logs"
